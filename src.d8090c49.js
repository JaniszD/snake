parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"5eKD":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.RETURN=13]="RETURN",e[e.SPACE=32]="SPACE",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.C=67]="C",e[e.G=71]="G",e[e.J=74]="J",e[e.K=75]="K"}(e=exports.keys||(exports.keys={})),exports.SIZE=40,exports.LENGTH=6,exports.MARGIN=60,exports.SLOWEST=250,exports.FASTEST=0;
},{}],"r8Tc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("./constants");!function(e){e.rand=function(e,t,r){void 0===r&&(r=n.SIZE);var o=Math.floor(Math.random()*(t-e))+e;return o-o%r},e.snap=function(e,t){void 0===t&&(t=n.SIZE);var r=e-e%t,o=r+t;return e-r<=o-e?r:o},e.removeNode=function(e){e.parentNode&&e.parentNode.removeChild(e)},e.bound=function(e,n,t){return Math.max(Math.min(e,t),n)},e.debounce=function(e,n){var t;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];clearTimeout(t),t=setTimeout(function(){return e.apply(void 0,r)},n)}}}(e||(e={})),exports.default=e;
},{"./constants":"5eKD"}],"wsKi":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){var t=new Map;e.set=function(e,n,r){void 0===r&&(r=!0),t.set(e+":"+n,r)},e.remove=function(e,n){t.delete(e+":"+n)},e.has=function(e,n){return t.has(e+":"+n)},e.get=function(e,n){return t.get(e+":"+n)},e.getAll=function(){return t}}(e||(e={})),exports.default=e;
},{}],"YoFF":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./constants"),i=t(require("./Utils")),s=t(require("./Locations")),n=function(){function t(t){var e=t.x,i=t.y,s=t.type,n=void 0===s?"body":s,h=t.direction,l=void 0===h?"RIGHT":h,o=t.next,d=void 0===o?null:o,r=t.prev,a=void 0===r?null:r;this.direction=l,this.type=n,this.x=e,this.y=i,this.el=document.createElement("div"),this.next=d,this.prev=a,this.setType(n),this.setPos(this.x,this.y),this.garden=document.getElementById("garden"),this.garden.appendChild(this.el)}return t.prototype.bend=function(t){this.direction!==t&&(this.el.className="",this.el.classList.add("cell",this.type,t,t+"-"+this.direction),this.direction=t)},t.prototype.setPos=function(t,e){this.el.style.top=e+"px",this.el.style.left=t+"px",this.applyClass(),"head"!==this.type&&"food"!==this.type&&"golden"!==this.type&&s.default.set(t,e)},t.prototype.move=function(t,n,h){void 0===h&&(h="RIGHT");var l=t,o=n;t<0?l=i.default.snap(this.garden.clientWidth)-e.SIZE:n<0?o=i.default.snap(this.garden.clientHeight)-e.SIZE:t>=i.default.snap(this.garden.clientWidth)?l=0:n>=i.default.snap(this.garden.clientHeight)&&(o=0);var d=this.direction;this.direction=h,this.setPos(l,o),null!==this.next?this.next.move(this.x,this.y,"head"===this.type?this.direction:d):s.default.remove(this.x,this.y),null===this.next&&"body"===this.type&&this.el.classList.add("tail"),null!==this.next&&this.next.x===l&&this.next.y===o&&this.next.el.classList.add("gulp"),null!==this.next&&this.direction!==this.next.direction&&this.el.classList.add(this.direction+"-"+this.next.direction),this.x=l,this.y=o},t.prototype.setType=function(t){this.type=t,this.applyClass()},t.prototype.applyClass=function(){this.el.className="",this.el.classList.add("cell",this.type,this.direction)},t.prototype.isCollidingWith=function(t){return null!==t&&(this.x===t.x&&this.y===t.y)},t.prototype.remove=function(){i.default.removeNode(this.el),s.default.remove(this.x,this.y),this.next&&(this.next.remove(),this.next=null)},t}();exports.default=n;
},{"./constants":"5eKD","./Utils":"r8Tc","./Locations":"wsKi"}],"OvRI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("./constants");!function(e){var n=[],u=t.keys.RIGHT;e.set=function(e){n.push(e)},e.get=function(){return u},e.pop=function(){return n.length>0&&(u=n.shift()),e.get()},e.flush=function(){n=[],u=t.keys.RIGHT},e.peek=function(){return n.length>0?n[n.length-1]:u}}(e||(e={})),exports.default=e;
},{"./constants":"5eKD"}],"3jKS":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,s){function r(e){try{a(o.next(e))}catch(t){s(t)}}function l(e){try{a(o.throw(e))}catch(t){s(t)}}function a(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(r,l)}a((o=o.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var i,o,n,s,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){r.label=s[1];break}if(6===s[0]&&r.label<n[1]){r.label=n[1],n=s;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(s);break}n[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(l){s=[6,l],o=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./constants"),n=i(require("./Piece")),s=i(require("./Utils")),r=i(require("./Locations")),l=i(require("./Directions")),a=function(){function i(e){this.levels=e,this.food=null,this.goldenApple=null,this.length=0,this.growth=0,this.highScore=0,this.score=0,this.currentLevel=null,this.moving=!1,this.paused=!1,this.gridVisible=!1,this.debugSpeed=0,this.keyHeld=0,this.noClip=!1,this.head=new n.default({x:80,y:80,type:"head"}),this.tail=this.resetHead(),this.garden=document.getElementById("garden"),this.renderGarden(),this.handleFood(),this.setEvents()}return i.prototype.renderGarden=function(){var e=document.body,t=e.clientHeight,i=e.clientWidth,n=Math.max(60,Math.floor(.1*t)),s=Math.max(60,Math.floor(.1*i)),r=i-2*s,l=t-2*n;r+=o.SIZE-r%o.SIZE,l+=o.SIZE-l%o.SIZE,this.garden.style.top=n+"px",this.garden.style.left=s+"px",this.garden.style.width=r+"px",this.garden.style.height=l+"px",document.documentElement.style.setProperty("--size",o.SIZE+"px"),this.showScore()},i.prototype.getRandomLevel=function(){return this.levels[Math.floor(Math.random()*this.levels.length)]},i.prototype.resetHead=function(){this.head.next&&(this.head.next.remove(),this.head.next=null);var e=o.SIZE*o.LENGTH+o.SIZE,t=5*o.SIZE;this.length=o.LENGTH;var i=this.head;this.head.move(e,t);for(var s=1;s<=o.LENGTH;s+=1)i.next=new n.default({x:e-o.SIZE*s+2,y:t,prev:i}),i=i.next;return i.setType("tail"),i},i.prototype.start=function(){!1===this.moving&&(this.tail=this.resetHead(),this.debugSpeed=0,this.keyHeld=0,this.score=0,l.default.flush(),this.showScore(),this.moving=!0,this.splashToggle(!1),requestAnimationFrame(this.frame.bind(this)))},i.prototype.over=function(){this.moving=!1;this.score;!function e(t){null!==t&&(t.el.classList.add("vanish"),setTimeout(function(){return e(t.prev)},20))}(this.tail),this.splashToggle(!0)},i.prototype.splashToggle=function(e){document.querySelector(".splash").style.display=e?"":"none"},i.prototype.getFoodLocation=function(){var e,t=s.default.rand(o.MARGIN,this.garden.clientWidth-o.MARGIN,o.SIZE),i=s.default.rand(o.MARGIN,this.garden.clientHeight-o.MARGIN,o.SIZE);return r.default.has(t,i)&&(t=(e=this.getFoodLocation())[0],i=e[1]),[t,i]},i.prototype.handleFood=function(){if(null==this.food){var e=this.getFoodLocation(),t=e[0],i=e[1];this.food=new n.default({x:t,y:i,type:"food"})}if(this.head.isCollidingWith(this.food)||this.head.isCollidingWith(this.goldenApple)){var o=this.head.isCollidingWith(this.food)?"food":"golden";this.swallowFood(o),!1===this.noClip&&(this.growth+=1),this.updateScore("food"===o?10:50),this.showScore()}},i.prototype.mayIHaveGoldenApple=function(){return 100*Math.random()<5},i.prototype.handleGoldenApple=function(){if(null===this.goldenApple){var e=this.getFoodLocation(),t=e[0],i=e[1];this.goldenApple=new n.default({x:t,y:i,type:"golden"})}},i.prototype.swallowFood=function(i){return e(this,void 0,void 0,function(){var e,o=this;return t(this,function(t){if("food"===i){if(null==this.food)return[2];this.tail.next=this.food,this.food.prev=this.tail,this.tail=this.food,this.food=null}else if("golden"===i){if(null==this.goldenApple)return[2];this.tail.next=this.goldenApple,this.goldenApple.prev=this.tail,this.tail=this.goldenApple,this.goldenApple=null}return(e=function(t){if(null!==t.next){if(null!==t.prev&&t.prev.el.classList.remove("gulp"),t.el.classList.add("gulp"),o.paused||!o.moving)return;setTimeout(function(){requestAnimationFrame(function(){e(t.next)})},o.getSpeed()/2)}})(this.head.next),this.mayIHaveGoldenApple()&&this.handleGoldenApple(),[2]})})},i.prototype.getSpeed=function(){var e=200-.5*this.growth+this.debugSpeed+this.keyHeld;return s.default.bound(e,o.FASTEST,o.SLOWEST)},i.prototype.updateScore=function(e){return!0===this.noClip?this.score:(this.score+=e,this.score)},i.prototype.showScore=function(){var e=document.getElementById("points"),t=document.getElementById("top");this.highScore=this.highScore<this.score?this.score:this.highScore,e.innerHTML=""+this.score,t.innerHTML="TOP: "+this.highScore},i.prototype.frame=function(){var e,t=this;if(this.moving&&setTimeout(function(){requestAnimationFrame(t.frame.bind(t))},this.getSpeed()),!this.paused){if(r.default.has(this.head.x,this.head.y)&&!1===this.noClip)return this.over();var i=l.default.pop();switch(r.default.remove(this.tail.x,this.tail.y),r.default.set(this.head.x,this.head.y),this.tail.setType("head"),i){case o.keys.RIGHT:this.tail.move(this.head.x+o.SIZE,this.head.y,o.keys[i]);break;case o.keys.LEFT:this.tail.move(this.head.x-o.SIZE,this.head.y,o.keys[i]);break;case o.keys.DOWN:this.tail.move(this.head.x,this.head.y+o.SIZE,o.keys[i]);break;case o.keys.UP:this.tail.move(this.head.x,this.head.y-o.SIZE,o.keys[i])}var n=this.head;e=[this.tail,this.tail.prev],this.head=e[0],this.tail=e[1],this.tail.next=null,this.tail.setType("tail"),n.setType("body"),n.prev=this.head,n.bend(this.head.direction),r.default.set(n.x,n.y),this.head.prev=null,this.head.next=n,this.head.setType("head"),this.handleFood()}},i.prototype.notBackwards=function(e){var t=l.default.peek();return!(t===o.keys.UP&&e===o.keys.DOWN||t===o.keys.DOWN&&e===o.keys.UP||t===o.keys.LEFT&&e===o.keys.RIGHT||t===o.keys.RIGHT&&e===o.keys.LEFT)},i.prototype.setEvents=function(){var e=this;document.addEventListener("keydown",function(t){switch(t.keyCode){case o.keys.G:e.gridVisible?e.removeGrid():e.drawGrid();break;case o.keys.C:e.noClip=!e.noClip,e.garden.classList.toggle("noclip");break;case o.keys.J:e.debugSpeed+=10;break;case o.keys.K:e.debugSpeed-=10;break;case o.keys.SPACE:e.moving?e.paused=!e.paused:e.start(),t.preventDefault();break;case o.keys.RETURN:e.start();break;default:if(t.keyCode>=48&&t.keyCode<=57){var i=t.keyCode-48;0===i?e.currentLevel&&(e.currentLevel.remove(),e.currentLevel=null):i-1 in e.levels&&(e.currentLevel&&e.currentLevel.remove(),e.currentLevel=e.levels[i-1],e.currentLevel.render())}t.keyCode in o.keys&&e.notBackwards(t.keyCode)&&(l.default.peek()!==t.keyCode?l.default.set(t.keyCode):e.keyHeld-=50,t.preventDefault())}}),document.addEventListener("keyup",function(){e.keyHeld=0}),document.addEventListener("click",function(t){"start"===t.target.id&&e.start()}),window.addEventListener("resize",s.default.debounce(function(){e.renderGarden(),e.currentLevel&&(e.currentLevel.remove(),e.currentLevel.render()),e.gridVisible&&(e.removeGrid(),e.drawGrid()),null!==e.food&&(e.food.remove(),e.food=null,e.handleFood()),null!==e.goldenApple&&(e.goldenApple.remove(),e.goldenApple=null,e.handleGoldenApple())},100))},i.prototype.removeGrid=function(){var e=document.querySelectorAll(".vertical-grid, .horizontal-grid");Array.from(e).forEach(s.default.removeNode),this.gridVisible=!1},i.prototype.drawGrid=function(){for(var e=0;e<this.garden.clientWidth;e+=o.SIZE){(t=document.createElement("div")).style.top="0px",t.style.left=e+"px",t.classList.add("vertical-grid"),this.garden.appendChild(t)}for(e=0;e<this.garden.clientHeight;e+=o.SIZE){var t;(t=document.createElement("div")).style.left="0px",t.style.top=e+"px",t.classList.add("horizontal-grid"),this.garden.appendChild(t)}this.gridVisible=!0},i.prototype.drawHitboxes=function(){var e=this;document.querySelectorAll(".hitbox").forEach(s.default.removeNode),r.default.getAll().forEach(function(t,i){var o=i.split(":"),n=o[0],s=o[1],r=document.createElement("div");r.classList.add("hitbox"),r.style.top=s+"px",r.style.left=n+"px",e.garden.append(r)})},i}();exports.default=a;
},{"./constants":"5eKD","./Piece":"YoFF","./Utils":"r8Tc","./Locations":"wsKi","./Directions":"OvRI"}],"egjQ":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("./Piece")),r=require("./constants"),n=function(){function t(t){this.generatorFunction=t,this.pieces=[],this.generatorFunction=t,this.garden=document.getElementById("garden")}return t.prototype.translate=function(t,e){return[Math.floor(t)*r.SIZE,Math.floor(e)*r.SIZE]},t.prototype.remove=function(){this.pieces.forEach(function(t){t.remove()})},t.prototype.line=function(t,r,n,o){for(var i=Math.abs(n-t),a=Math.abs(o-r),s=t<n?1:-1,u=r<o?1:-1,h=i-a;;){var c=this.translate(t,r),f=c[0],l=c[1];if(this.pieces.push(new e.default({x:f,y:l,type:"wall"})),Math.abs(t-n)<=.5&&Math.abs(r-o)<=.5)break;var p=2*h;p>-a&&(h-=a,t+=s),p<i&&(h+=i,r+=u)}},t.prototype.render=function(){var t=this,e=Math.floor(this.garden.clientHeight/r.SIZE),n=Math.floor(this.garden.clientWidth/r.SIZE);this.generatorFunction(n,e).forEach(function(e){var r=e[0],n=r[0],o=r[1],i=e[1],a=i[0],s=i[1];t.line(n,o,a,s)})},t}();exports.default=n;
},{"./Piece":"YoFF","./constants":"5eKD"}],"+bSA":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){var r=[t/2,e/2],u=r[0],a=r[1];return[[[3,3],[a-3,3]],[[a+3,3],[e-3,3]],[[e-3,3],[e-3,u-3]],[[e-3,u+3],[e-3,t-3]],[[e-3,t-3],[a+3,t-3]],[[a-3,t-3],[3,t-3]],[[3,t-3],[3,u+3]],[[3,u-3],[3,3]]]});
},{"../Level":"egjQ"}],"m4lW":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){var r=[e/2,t/2],u=r[0],a=r[1];return[[[u-2,a],[u+2,a]],[[u,a-2],[u,a+2]],[[u-8,a-8],[u-3,a-3]],[[u+3,a+3],[u+8,a+8]],[[u+8,a-8],[u+3,a-3]],[[u-3,a+3],[u-8,a+8]]]});
},{"../Level":"egjQ"}],"R4XU":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){var r=[e/2,t/2],u=r[0],a=r[1];return[[[3,3],[u-3,3]],[[u+3,3],[e-3,3]],[[e-3,3],[e-3,a-3]],[[e-3,a+3],[e-3,t-3]],[[e-3,t-3],[u+3,t-3]],[[u-3,t-3],[3,t-3]],[[3,t-3],[3,a+3]],[[3,a-3],[3,3]],[[9,9],[u-6,9]],[[u+6,9],[e-9,9]],[[e-9,9],[e-9,a-6]],[[e-9,a+6],[e-9,t-9]],[[e-9,t-9],[u+6,t-9]],[[u-6,t-9],[9,t-9]],[[9,t-9],[9,a+6]],[[9,a-6],[9,9]]]});
},{"../Level":"egjQ"}],"EN1T":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){return[[[3,3],[e-3,t-3]],[[e-3,3],[3,t-3]]]});
},{"../Level":"egjQ"}],"tMVy":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../Level"));exports.default=new t.default(function(e,t){return[[[0,0],[e,0]],[[0,t],[e,t]],[[0,1],[0,t-1]],[[e,1],[e,t-1]]]});
},{"../Level":"egjQ"}],"7QCb":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var l=e(require("./Game")),r=e(require("./levels/level-1")),u=e(require("./levels/level-2")),t=e(require("./levels/level-3")),a=e(require("./levels/level-4")),i=e(require("./levels/level-5"));globalThis.game=new l.default([r.default,u.default,t.default,a.default,i.default]);
},{"./Game":"3jKS","./levels/level-1":"+bSA","./levels/level-2":"m4lW","./levels/level-3":"R4XU","./levels/level-4":"EN1T","./levels/level-5":"tMVy"}]},{},["7QCb"], null)
//# sourceMappingURL=src.d8090c49.js.map